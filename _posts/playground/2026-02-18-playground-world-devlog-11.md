---
layout: post
title: "Playground Devlog #11 - 월드 대확장: 100x100 맵, KSA 캠퍼스, 마을, 술래잡기"
date: 2026-02-18 23:59:00 +0900
categories: [playground, devlog]
tags: [world-expansion, map, buildings, npc, minigame, tag, performance]
---

34x34 타일의 작은 세상이 너무 빈약했습니다. 건물 3개에 NPC 9명이 빈 풀밭을 떠돌았죠. 이번 업데이트로 세상을 **100x100 타일**로 대폭 확장하고, 건물·NPC·소품·미니게임을 한꺼번에 추가했습니다.

## 맵 확장: 34x34 → 100x100

면적이 약 8.6배 증가했습니다. 현재 콘텐츠는 (5~55, 5~50) 영역에 집중되어 있고, 나머지는 나무와 바위가 드문드문 있는 자연 지대로 추후 확장 예정입니다.

## 건물: 3개 → 11개

기존 카페·사무실·시장에 더해 8개 건물을 추가했습니다.

- **KSA 본관** (5x3 대형) — 기존 9명 NPC의 학교
- **KSA 기숙사** — 밤에 NPC들이 돌아오는 곳
- **빵집** — 주황색 어닝, 빵 간판
- **꽃집** — 분홍 벽, 꽃 장식
- **도서관** — 파란 톤, 책 간판
- **주택 A/B/C** — 굴뚝 + 밤에 연기 효과

각 건물에 고유 간판 아이콘과 특수 효과(어닝, 꽃 장식, 굴뚝 연기)를 구현했습니다.

## KSA 캠퍼스 + 마을 NPC

기존 9명 NPC를 KSA 캠퍼스로 이동시켰습니다. 낮에 본관 주변에 모여서 수다를 떱니다.

새 건물에는 전용 마을 NPC 6명을 추가했습니다: 빵집 사장 한소영, 꽃집 주인 윤채린, 도서관 사서 송재현, 주민 강민호·오지은·임태준. 총 **15명**.

## 소품: 26개 → ~120개

새 소품 타입 4종(분수, 벤치, 바위, 이정표)을 추가하고 맵 전체에 배치했습니다.

## 술래잡기 미니게임

맵 (30, 20)에 **놀이터**를 만들었습니다. 놀이터에서 E키를 누르면 주변 NPC 중 하나와 60초 술래잡기가 시작됩니다. NPC는 플레이어 반대 방향으로 도망치고, 잡으면 15코인 + 호감도 보상.

## 성능 최적화

10,000 타일을 매 프레임 그리면 느려지므로 **뷰포트 컬링**을 추가했습니다. 플레이어 주변 타일만 렌더링하고, 미니맵도 2칸 간격 샘플링으로 최적화했습니다.

## 버그 수정: NPC가 건물 안에 갇히는 문제

모든 `places` 좌표가 건물 충돌 영역 내부에 있어서 NPC가 `canStand()` 실패로 이동 불가능한 버그가 있었습니다. 모든 장소 좌표를 건물 남쪽 문 앞(건물 밖)으로 재조정하고, 세이브 로드 시 건물 안에 끼인 NPC/플레이어를 자동으로 밖으로 이동시키는 안전장치를 추가했습니다.
